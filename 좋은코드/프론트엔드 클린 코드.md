# 프론트엔드 클린 코드

> [토스ㅣSLASH 21 - 실무에서 바로 쓰는 Frontend Clean Code](https://www.youtube.com/watch?v=edWbHp_k_9Y)를 보며

### 실무에서 클린 코드의 의의

- "그 코드는 안건드리시는 게 좋을 거에요. 일단 제가 만질게요."

  - = 흐름 파악이 어렵고 도메인 맥락 표현이 안되어 동료에게 물어봐야 알 수 있는 코드

- 실무에서 클린 코드의 의의 = 유지보수 시간의 단축

  - 동료, 혹은 과거에 내가 짠 코드를 빠르게 이해할 수 있다면 유지보수할 때 드는 개발 시간이 짧아진다.

- 읽기 좋은 깔끔한 코드는 코드리뷰의 시간과 버그가 났을 때 디버깅 시간도 단축시킨다.

- 시간 = 자원 = 돈

---

### 안일한 코드 추가의 함정

- 하나의 목적인 코드가 흩뿌려지게 된다.

  - 이들이 뚝뚝 떨어져 있어서 나중에 기능을 추가할 때 스크롤을 위아래로 이동하며 미로찾기를 해야 한다.

- 하나의 함수가 여러가지 일을 하게 된다.

  - 세부 구현을 모두 읽어야 함수의 역할을 알 수 있다.

  - 코드 추가 및 삭제도 더 오래 걸리게 된다.

- 함수의 세부 구현 단계가 제각각이 된다.

  - 읽을 때 어지럽다. 즉, 코드를 이상하게 지레짐작하게 된다.

---

### 로직을 빠르게 찾을 수 있는 코드

- 클린 코드 !== 짧은 코드

  - 클린 코드란 **원하는 로직을 빠르게 찾을 수 있는 코드**다.

- **응집도**: 하나의 목적을 가진 코드는 뭉친다.

  - 보기 더러울 때는 일단 뭉친다? ❌

    - 예를 들어, 커스텀 훅으로 코드를 뭉치면 중요한 포인트들이 오히려 훅 속에 가려져서 알 수 없게된다.

  - 무엇을 뭉쳐야 하는가? "당장 몰라도 되는 디테일"

    - 당장 몰라도 되는 디테일을 숨겨둔다면 짧은 코드만 보고도 빠르게 코드의 목적을 파악하는 게 쉬워진다.

  - 무엇을 뭉치면 답답한가? "코드 파악에 필수적인 핵심 정보"

    - 코드 파악에 필수적인 핵심 정보를 분리하면 여러 모듈을 넘나들며 흐름을 따라가야 하는 참사가 일어난다.

  - 남겨야 할 핵심 데이터와 숨겨도 될 세부 구현을 나누자.

    - 핵심 데이터 예시: 팝업 버튼 클릭 시 수행하는 액션, 팝업의 제목 및 내용

    - 숨겨도 될 세부 구현 예시: 팝업을 열고 닫을 때 사용하는 상태, 컴포넌트의 세부 마크업, 팝업의 버튼 클릭 시 특정 함수를 호출하는 바인딩

      ```jsx
      const [openPopup] = usePopup();

      async function handleClick() {
        const confirmed = await openPopup({
          tilte: '보험 질문하기',
          contents: <div>전문가가 설명드려요</div>,
        });
        if (confirmed) {
          await submitQuestion();
        }
      }
      ```

    - 위 코드에서 핵심 데이터인 팝업 제목과 내용, 액션은 바깥에서 넘긴다. 이를 통해 세부 구현을 읽지 않아도 어떤 팝업인지 파악할 수 있다.

    - 선언적 프로그래밍

      - 핵심 데이터만 전달받고 세부 구현은 뭉쳐 숨겨두는 개발 스타일

      - "팝업, 너에게 선언한다! 제목은 "보험 질문하기", 내용은 "전문가가 설명드려요", 그리고 확인 버튼을 클릭하면 질문을 제출해라!"

      - '무엇'을 하는 함수인지 빠른 이해가 가능하다.

      - '무엇'만 바꿔서 쉽게 재사용할 수 있다.

- **단일책임**: 함수가 한 가지 일만 하도록 쪼갠다.

  - 하나의 일을 하는 뚜렷한 이름의 함수를 만들자.

    - 중요 포인트가 모두 담겨있지 않은 함수명은 읽는 이가 예상한 대로 코드가 동작하지 않으며, 이는 코드에 대한 신뢰 하락으로 이어진다.

  - 함수 뿐 아니라, 컴포넌트로 분리할 수도 있다.

  - 조건이 많아지면 한글 이름도 매우 유용하다.

- **추상화**: 함수의 세부 구현 단계를 통일한다.

  - 로직에서 핵심 개념을 뽑아내자.

    ```jsx
    // Before: 팝업 코드 제로부터 구현
    <div style={팝업스타일}>
      <button
        onClick={async () => {
          const res = await 회원가입();
          if (res.success) {
            프로필로이동();
          }
        }}
      >
        전송
      </button>
    </div>

    // After: 중요 개념만 남기고 추상화
    <Popup
      onSubmit={회원가입}
      onSuccess={프로필로이동}
    />
    ```

  - 정답은 없다. 상황에 따라 필요한 만큼만 추상화하면 된다.

  - 추상화 수준이 섞여 있으면 코드 파악이 어렵다.

    - 높은 추상화, 낮은 추상화, 중간 추상화가 섞여 있는 경우를 말한다.

    - 추상화 단계를 비슷하게 정리하면 코드를 물 흐르듯이 파악할 수 있다.

---

### 액션 아이템

- **담대하게 기존 코드 수정하기**

  - 두려워하지 말고 기존 코드를 씹고 뜯고 맛보고 즐기자.

- **큰 그림 보는 연습하기**

  - 그 때는 맞고 지금은 틀릴 수 있다.

  - 기능 추가 자체는 클린해도, 전체적으로는 어지로울 수 있다.

- **팀과 함께 공감대 형성하기**

  - 코드에 정답은 없다. 명시적으로 이야기를 하는 시간이 필요하다.

  - 각자 문제라고 생각하는 지점을 공유해 집단지성을 모으고, 어떻게 개선할 것인지 고민하자.

- **문서로 적어 보기**

  - 클린 코드란 모호한 개념이다. 글로 적어야 명확해진다.

  - 향후 어떤 점에서 위험할 수 있는지, 어떻게 개선할 수 있는지 나만의 원칙을 적어보자.
